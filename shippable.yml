language: python

python:
  - 2.7
  - 3.4
  - 3.5

env:
  - DJANGO_VERSION="1.8.*" GRAPPELLI_VERSION="2.7.*"
  - DJANGO_VERSION="1.9.*" GRAPPELLI_VERSION="2.8.*"
  - DJANGO_VERSION="1.10.*" GRAPPELLI_VERSION="2.9.*"
  - DJANGO_VERSION="1.11.*" GRAPPELLI_VERSION="2.10.*"

build:

  ci:

    - pip install -q -r requirements/test.txt
    - pip install -q -U "Django==$DJANGO_VERSION"
    - pip install -q -U "django-grappelli==$GRAPPELLI_VERSION"

    - pip install -e .

    - mkdir -p shippable/testresults
    - mkdir -p shippable/codecoverage

    - python tests/runtests.py --with-xunit --xunit-file=shippable/testresults/nosetests.xml --with-coverage --cover-branches --cover-package=yepes --cover-xml --cover-xml-file=shippable/codecoverage/coverage.xml
